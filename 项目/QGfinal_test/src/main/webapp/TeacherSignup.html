<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>教师注册</title>
    <link href="css/TeacherSignup.css" rel="stylesheet">
</head>
<body>

<div id="n1">
    <h1>欢迎注册</h1>
    <span>已有帐号？</span> <a href="TeacherLogin.html">登录</a>
</div>
<div id="signupDiv" style="height: 350px">
    <form id = "form">
        <h1 class="signup">注册账号</h1>
        <div id="errorMsg" v-model="errorMsg">{{errorMsg}}</div>
        <p class="signup">姓名<input id="teachername" type="text" name="teachername" v-model="Teacher.teachername"></p>
        <p class="signup">工号<input id="teacherid" type="text" name="teacherid" v-model="Teacher.teacherid"></p>
        <p class="signup">密码<input  id="password" type="password" name="password" v-model="Teacher.password"></p>
        <template>
            <p class="signup">学院<el-select v-model="Teacher.college" placeholder="请选择">
                <el-option
                        v-for="item in options"
                        :key="item.value"
                        :label="item.label"
                        :value="item.value">
                </el-option>
            </el-select></p>
        </template>

        <p class="signup">QQ<input  id="qq" type="text" name="qq" v-model="Teacher.qq"></p>
        <p class="signup">email<input  id="email" type="text" name="email" v-model="Teacher.email"></p>
        <p class="signup">个人介绍<input  id="description" type="text" name="description" v-model="Teacher.description"></p>

        <el-row class="signup">
            <el-button  type="primary" @click="signup">注册</el-button>
            <el-button  type="primary" @click="login">返回登录</el-button>
        </el-row>

        <form>

</div>

<script src="js/axios-0.18.0.js"></script>
<script src="js/vue.js"></script>
<script src="element-ui/lib/index.js"></script>
<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">

<script>
    new Vue({
        el:"#signupDiv",

        data(){
            errorMeg:''
            return{
                Teacher:{
                    id:'',
                    teachername:'',
                    teacherid:'',
                    password:'',
                    college:'',
                    qq:'',
                    email:'',
                    description:'',
                    create_time:'',
                    update_time:'',
                },
                options: [{
                    value: '计算机学院',
                    label: '计算机学院'
                }, {
                    value: '外国语学院',
                    label: '外国语学院'
                }, {
                    value: '信息工程学院',
                    label: '信息工程学院'
                }, {
                    value: '自动化学院',
                    label: '自动化学院'
                }],
            }

        },

        methods:{
            signup(){
                var _this = this;
                console.log(_this.Teacher);
                axios({
                    method: "post",
                    url:"http://localhost:8080/QGfinal_test_war/Teacher/teacherSignup",
                    data: _this.Teacher,
                }).then(function (resp) {
                    if(resp.data == "success"){
                        //提示添加成功
                        _this.$message({
                            message: '恭喜你，注册成功啦',
                            type: 'success'
                        });
                    }
                    else if(resp.data == "failed"){
                        _this.errorMsg = "此用户名已存在";
                        _this.User.password = '';
                        //提示添加成功
                        _this.$message({
                            message: '恭喜你，注册失败啦',
                            type: 'warning'
                        });
                    }
                })
            },

            //回到登录页面
            login(){
                location.href = "/QGfinal_test_war/TeacherLogin.html";
            },
        },


    })
</script>
</body>
</html>