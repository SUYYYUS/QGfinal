<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .welcome{
            /*text-align: center;*/
            color: #cdb1ef;
        }
    </style>
</head>
<body>
<h2 class = "welcome" >选择你要学习的章节</h2>
<div id="studyDiv">


    <template>
        <el-table
                :data="tableData"
                style="width: 100%"
                :row-class-name="tableRowClassName"
                @selection-change="handleSelectionChange">
            <el-table-column
                    type="index"
                    width="50">
            </el-table-column>
            <el-table-column
                    prop="sectionname"
                    label="章节名称"
                    align="center"
            >
            </el-table-column>
<!--            <el-table-column-->
<!--                    prop="content"-->
<!--                    label=教学内容-->
<!--                    align="center"-->
<!--            >-->
<!--            </el-table-column>-->

            <el-table-column
                    prop="create_time"
                    label="创建时间"
                    align="center"
            >
            </el-table-column>

            <el-table-column
                    prop="id"
                    align="center"
                    label="操作">
                <template slot-scope="scope">
                    <el-row>
                        <el-button type="primary" @click="opencontent(scope.row)">开始学习</el-button>
                        <el-button  type="primary" @click="answerQuestion(scope.row)">开始作答</el-button>
                    </el-row>
                </template>
            </el-table-column>
        </el-table>
    </template>
</div>




<script src="js/axios-0.18.0.js"></script>
<script src="js/vue.js"></script>
<script src="element-ui/lib/index.js"></script>
<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">
<script>
    new Vue({
        el:"#studyDiv",

        mounted(){
            this.showAllSection();

        },

        data(){
            return{


                Section:{
                    id:'',
                    sectionname:'',
                    content:'',
                    course_id:'',
                    create_time:'',
                },

                tableData:[],

                Question:{
                    id:'',
                    type:'',
                    content:'',
                    answer:'',
                    score:'',
                    course_section_id:'',
                    course_id:'',
                    create_time:'',
                },





            }
        },

        methods:{


        showAllSection(){
            var _this = this;

            axios({
                method:"get",
                url:"http://localhost:8080/QGfinal_test_war/Section/selectAllSectionBycourse_id",
            }).then(resp =>{
                //设置表格数据
                this.tableData = resp.data;
            })
        },

        tableRowClassName({row, rowIndex}) {
            if (rowIndex%2 === 0) {
                return 'warning-row';
            } //else  {
            //return 'success-row';
            //}
            return 'success-row';
        },
        //复选框选中后执行的方法
        handleSelectionChange(val) {
            this.multipleSelection = val;

        },

        //展示内容
        opencontent(row){
            var _this = _this;
            this.Section = row;
            console.log(this.Section);

            this.$alert(this.Section.content, '知识内容', {
                confirmButtonText: '确定',
                callback: action => {
                    this.$message({
                        type: 'info',
                        message: `action: ${ action }`
                    });
                }
            });

        },


            //跳转到作答页面
            answerQuestion(row) {
              var _this = this;
                this.Section = row;
                console.log(this.Section);
              axios({
                  method: "post",
                  url: "http://localhost:8080/QGfinal_test_war/Section/queryByIdAndSession",
                  data: this.Section.id,
              }).then(function (resp) {
                  if(resp.data == "success"){
                      answerquestion();
                  }
              })

            },
        },
    })


</script>
<script>
    function answerquestion() {
        location.href = "/QGfinal_test_war/makeAnswer.html";
    }
</script>
</body>
</html>